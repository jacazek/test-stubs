# Getting started

This project generates a docker image what can be used to expedite writing and testing of contracts and stubs.

Containers started from the image generated by this projects `Dockerfile` will monitor
a user specified volume for contract file additions, deletions, and modification events. When an event is detected, stubs are published according to the contract files using the wiremock service listening on the user specified port.

The container will publish any contracts found upon startup.

The gradle project what compiles contracts into wiremock stubs takes a minute to initialize on startup.  Once initialized, subsequent contract updates should be reflected in the published stubs very quickly.

## Building the image
To build the docker image run `docker build --tag stub-tester .` from within the root directory of this project.
You can substitute any `tag` value you desire to name the image that is generated.
In this example we call the image `stub-tester`.

## Running the container
To test contracts locally, run a container instance for the `stub-tester` image specifying a port and contract directory.

For example, if you have:
1. Contracts locally in directory `/home/user/DEV/project/contracts`.
2. Desire to run stubs on port `40001`

Then you would run command
```
docker run --rm \
  --name teststubs \
  -p 40001:8080 \
  -v /home/user/DEV/project/contracts:/home/contracts \
  stub-tester
```

The command will start a container named `teststubs` running a wiremock service listening on port 40001 
and watching contracts in the local directory `/home/user/DEV/project/contracts` that, when stopped, will
remove the container instance.

## Stopping the container
Run the command `docker container stop teststubs`.
